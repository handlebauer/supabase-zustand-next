# Implementation Overview

## Flow Definition

```yaml
steps:
    data_model:
        file: _1_DATA_MODEL.md
        provides:
            - database_schema
            - supabase_types # Generated by Supabase CLI
            - zod_schemas # Derived from supabase_types
            - seed_data # Based on supabase_types
            - rls_policies
        critical_patterns: [relationships, security]
        type_flow:
            1: 'SQL Schema → Supabase Types (via supabase gen types)'
            2: 'Supabase Types → Zod Schemas (via type conversion)'
        next_step: services_layer

    services_layer:
        file: _2_SERVICES_LAYER.md
        requires: [schema, types]
        provides: [database_operations]
        critical_patterns: [error_handling, transactions]
        next_step: server_actions

    server_actions:
        file: _3_SERVER_ACTION.md
        requires: [database_operations]
        provides: [api_endpoints, cache_invalidation]
        critical_patterns: [validation, caching]
        next_step: store_slice

    store_slice:
        file: _4_STORE_SLICE_BASIC.md
        requires: [api_endpoints]
        provides: [client_state, loading_states]
        critical_patterns: [state_management]
        variants:
            advanced:
                file: _4_STORE_SLICE_ADVANCED.md
                when: ['optimistic_updates', 'complex_state']
        next_step: hooks

    hooks:
        file: _5_HOOKS.md
        requires: [client_state, api_endpoints]
        provides: [reusable_logic]
        critical_patterns: [composition]
        next_step: ui_component

    ui_component:
        file: _6_UI_COMPONENT.md
        requires: [reusable_logic, client_state]
        provides: [user_interface]
        critical_patterns: [accessibility, error_states]
```

## Core Patterns

```yaml
patterns:
    type_generation:
        - supabase_to_zod:
              steps:
                  - Generate Supabase types
                  - Convert Database types to Zod
                  - Add runtime validations
        - type_inference:
              - Use Database.TableName type
              - Map SQL to TypeScript types
              - Handle nullability

    security:
        - row_level_security
        - role_based_access

    error_handling:
        - retry_with_backoff
        - rollback_on_failure
        - optimistic_recovery

    state_management:
        - basic: [loading, error, success]
        - advanced: [optimistic, rollback]

    caching:
        - revalidation
        - invalidation_chains
```

## Usage

1. Start with feature requirements
2. Create database schema and run `supabase gen types`
3. Use generated types to create Zod schemas
4. Implement remaining steps using validated types
5. For patterns/examples, see \_REFERENCE.md (optional)
